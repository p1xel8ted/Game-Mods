var ot=Object.defineProperty;var rt=(e,t,n)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>rt(e,typeof t!="symbol"?t+"":t,n);const it="adengadinfo",st="adengadsizeinfo",at=e=>e.type==="clicked"||e.type==="force-close";var pe=(e=>(e.BIDDER_RESPONSE="bid_response",e))(pe||{}),Z=(e=>(e.ADENGPAGESTATUS="adengpagestatus",e))(Z||{}),we=(e=>(e.IDENTITY_INFO="identity_info",e))(we||{}),Ee=(e=>(e.LABRADOR_KEYVALUES="labrador_keyvalues",e))(Ee||{}),m=(e=>(e.AE_FIRST_LINE_EXEC="ae.firstLineExec",e.AE_AFTER_INIT_PLUGINS="ae.afterInitPlugins",e.AE_AFTER_GPT_WRAPPER_INIT="ae.afterGptWrapperInit",e.AE_AD_ENGINE_INIT="ae.adEngineInit",e.AE_ON_BIDDERS_INIT="ae.onBiddersInit",e.AE_CONFIG_CALLBACK_STARTED="ae.beforeAuction.configCallbackStarted",e.AE_CONFIG_CALLBACK_COMPLETE="ae.beforeAuction.configCallbackComplete",e.AE_AUCTION_START="ae.auctionStart",e.AE_AUCTION_START_A9_START="ae.auctionStart.a9.bidStart",e.AE_AUCTION_END="ae.auctionEnd",e.AE_BEFORE_FIRST_CALL_ADS_REQUEST="ae.beforeFirstCallAdsRequest",e.AE_FIRST_RENDER_CYCLE_COMPLETE="ae.firstRenderCycleComplete",e.AE_GPT_SLOT_REQUESTED_INITIAL="ae.gpt.slotRequested.initial",e.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL="ae.gpt.slotResponseReceived.initial",e.AE_GPT_SLOT_RENDERED_ENDED_INITIAL="ae.gpt.slotRenderEnded.initial",e.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL="ae.gpt.slotOnload.initial",e))(m||{}),z=(e=>(e.AE_AUCTION_DURATION_A9_BID_TOTAL_TIME="ae.d.auctionDuration.a9.bidTotalTime",e.AE_AUCTION_DURATION="ae.d.auctionDuration",e.AE_DURATION_TO_BID="ae.d.firstLineExec_to_auctionStart",e.AE_CONFIG_CALLBACK_DURATION="ae.d.configCallbackDuration",e))(z||{});const U="adengloadtimes";var g=(e=>(e.SLOT_REQUESTED="requested",e.SLOT_RENDERED="rendered",e.AE_INIT="init",e.VENDOR_TIME_UPDATE="vendor_time_update",e.CREATIVE_RENDERED="creative_rendered",e.PERFORMANCE_MARK="performance_mark",e))(g||{}),ee=(e=>(e.TRACKING_EVENT="trackingevent",e))(ee||{}),he=(e=>(e.SHORT_LIVED_TRACKING_EVENT="shortlivedtrackingevent",e))(he||{}),ve=(e=>(e.COMPONENT_PERFORMANCE_EVENT="component_performance",e))(ve||{}),Te=(e=>(e.RECOMMENDATION_EVENT="recommendation",e))(Te||{}),d=(e=>(e.P1="p1",e.P2="p2",e.P3="p3",e.P4="p4",e))(d||{}),te=(e=>(e.PAGE_LOAD="page_load",e))(te||{}),O=(e=>(e.YES="yes",e.NO="no",e.NOT_APPLICABLE="",e))(O||{}),Se=(e=>(e.ERROR_NO_TIER_PROVIDED="-2",e.ERROR_DISABLED_TIERS="-1",e.NOT_SUITABLE_FOR_ADVERTISING="2",e.PARTIALLY_MONETIZED="3",e.FULLY_MONETIZED="4",e))(Se||{}),be=(e=>(e.FANDOM="fandom",e.METACRITIC="metacritic",e.GAMESPOT="gamespot",e.TVGUIDE="tvguide",e.GAMEFAQS="gamefaqs",e.COMICVINE="comicvine",e.UNKNOWN="unknown",e))(be||{}),ke=(e=>(e.UCP_DESKTOP="ucp_desktop",e.UCP_MOBILE="ucp_mobile",e.FANDOM_MOBILE="fandom_mobile",e.FANDOM_DESKTOP="fandom_desktop",e.FEEDS="feeds",e.TRIVIA="trivia",e.CANONICAL_PAGES="canonical-pages",e.RESPONSIVE="responsive",e.UNKNOWN="unknown",e))(ke||{});const ct=()=>{};function Ae(e){e.cmd??(e.cmd=[]);const t=[...e.cmd];e.cmd.push=(...n)=>{for(const o of n)o(e);return 0};for(const n of t)n(e)}function dt(e,t){const n=[...e];e.push=(...o)=>(o.forEach(t),0),n.forEach(t),e.length=0}const ut=e=>{const t=("; "+document.cookie).split("; "+e+"=");return t.length>=2?t.pop().split(";").shift():null},Ie=e=>e!=null&&e.length?` domain=${e};`:"",lt=(e,t,n)=>{const o=new Date;o.setTime(o.getTime()+n.expires*1e3),document.cookie=`${e}=${t};${Ie(n.domain)} path=${n.path}; expires=${o.toUTCString()}`},gt=(e,t)=>{document.cookie=`${e}=;${Ie(t.domain)} path=${t.path}; expires=Thu, 01 Jan 1970 00:00:00 GMT`},y={set:lt,get:ut,delete:gt},Ce=()=>{const e=window.location.hostname,t=e.split(".");return t.length<2?e:`.${t[t.length-2]}.${t[t.length-1]}`};async function Ne(e,t=1e3,n={}){const o=new AbortController,r=setTimeout(()=>o.abort("The request has timed out"),t),i=await fetch(e,{signal:o.signal,...n});return clearTimeout(r),i}function mt(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.odyssey)==null?void 0:t.platform)??"app"}function Re(e){return new URLSearchParams(window.location.search).get(e)}function ne(e){const t=Re(e);return ft(e)&&t===""||t==="1"||t==="true"}function ft(e){return new URLSearchParams(window.location.search).has(e)}const oe="",Oe=/^(?:(v\d+)-)?(\d{2})$/;function w(){let e=Re("pf_pathfinder_force_bucket")??y.get("exp_bucket");const t=e==null?void 0:e.match(Oe);return t&&t.length>=3&&(e=t[2]),e??oe}function _t(){const t=(y.get("exp_bucket")??"").match(Oe);return t&&t.length>=3&&t[1]?t[1]:oe}function pt(){return y.get("exp_bucket_2")??oe}function wt(e=window.fandomContext??null){var n;const t=(n=e==null?void 0:e.page)==null?void 0:n.monetizationTier;return typeof t=="number"?t.toString():Se.ERROR_NO_TIER_PROVIDED}const ye=()=>{var e;return window.fandomHost??(window.fandomHost={cmd:[]}),(e=window.fandomHost).cmd??(e.cmd=[]),window.fandomHost};function P(e){ye().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"error"})})}const Et="E035",ht="E036",vt="E037",Tt="E038",St="E039",bt="E041",kt="E042",At="E043",It="D021",Ct="D022",Nt="D023";function V(){var e,t,n;return window.fandomTrack??(window.fandomTrack={q:[],cmd:[],registry:{}}),(e=window.fandomTrack).q??(e.q=[]),(t=window.fandomTrack).cmd??(t.cmd=[]),(n=window.fandomTrack).registry??(n.registry={}),window.fandomTrack}function re(e,t){V().q.push({event:e,payload:t})}function ie(e){ye().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"degradation"})})}function Rt(e,t){return new Promise((n,o)=>{setTimeout(()=>{let r=`Operation timed out after ${e}ms`;o(new Error(r))},e)})}function Ot(e,t,n){const o=Rt(t);return Promise.race([e,o])}function yt(e=[],t){const n=e.flat().filter(o=>o.status==="rejected");if(n.length>0){for(const r of n)P({message:"Promise rejected",error:r.reason,priority:d.P3,code:bt});let o=`${n.length} of ${e.length} promises were rejected.`;P({message:o,priority:d.P3,data:n,code:kt})}}async function Pt(e,t,n){const o=await Ot(Promise.allSettled(e),t);return yt(o),o}const le="fandomConsentUpdate",Dt=(e=window,t=!0)=>{const n=()=>{var o;return e.fandomCmp!==void 0&&e.fandomCmp.ready&&(t?(o=e.fandomCmp.allowed)==null?void 0:o.ads:!0)};return new Promise(o=>{if(n())return o();const r=()=>{n()&&(e.removeEventListener(le,r),o())};e.addEventListener(le,r)})},ge="fandomContextUpdate",Lt=(e=window)=>{const t=()=>{var n;return((n=e.fandomContext)==null?void 0:n.tracking)!==void 0&&e.fandomContext.tracking.pvNumber&&e.fandomContext.tracking.pvNumberGlobal&&e.fandomContext.tracking.pvUID};return new Promise(n=>{if(t())return n();const o=()=>{t()&&(e.removeEventListener(ge,o),n())};e.addEventListener(ge,o)})};function D(){var t;const e=(t=window.fandomAds)==null?void 0:t.deploymentEnvironment;return e==="production"||e==="canary"||e==="development"?e:"unknown"}const xt=/Mobile|iPhone|Android|Silk|Kindle|Windows Phone|KFAPWI|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Mt=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,Bt=/iPad|Android(?!.*Mobile)/i,F=()=>{const e=window.navigator.userAgent;return Bt.test(e)?"tablet":xt.test(e)||Mt.test(e.substring(0,4))?"smartphone":"desktop"},$t=e=>e.includes("Android")?"Android":"Linux",Ut=()=>{const e=window.navigator.userAgent,[t=""]=e.match(/Win|Mac|Linux|Android|like Mac/)??[];switch(t){case"Win":return"Windows";case"Mac":return"OSX";case"Linux":return $t(e);case"Android":return"Android";case"like Mac":return"iOS";default:return"unknown"}},Pe={chrome:void 0,safari:void 0,firefox:void 0,msie:void 0,trident:void 0};function Vt(e){return e in Pe}function Ft(e){const t=new RegExp(`(${Object.keys(Pe).join("|")})\\/?\\s*(\\d+)`,"i"),n=e.match(t);if(!n||!n[1]||!n[2])return["",""];const o=n[1].toLowerCase(),r=Number.parseInt(n[2]);return!Vt(o)||Number.isNaN(r)?["",""]:[o,`${r}`]}function L(e,t){return`${e} ${t}`}function zt(e){const t=e.match(/\b(OPR|Edg)\/(\d+)/);if(!t||!t[1]||!t[2])return"";const n=t[1],o=Number.parseInt(t[2]);if(Number.isNaN(o))return"";let r;return n==="OPR"?r="Opera":r="Edge",L(r,`${o}`)}function Gt(e,t){const n=e.match(/version\/(\d+)/i),o=Number.parseInt((n==null?void 0:n[1])??"");return L("Safari",Number.isNaN(o)?t:`${o}`)}function Ht(e,t){return`${e} ${t} -?`}function De(){const{appName:e,appVersion:t,userAgent:n}=navigator,[o,r]=Ft(n);if(!o)return Ht(e,t);switch(o){case"trident":return L("IE","11");case"chrome":return zt(n)||L("Chrome",r);case"safari":return Gt(n,r);case"msie":return L("MSIE",r);case"firefox":return L("Firefox",r)}return""}const qt="https://services.fandom.com/geoip/location",Le=async e=>{const t=e.get("Geo");if(t)try{return JSON.parse(decodeURIComponent(t))}catch(s){P({code:Et,message:"Error parsing Geo cookie",priority:d.P3,error:s});const c=Ce();e.delete("Geo",{domain:c,path:"/"})}const n=await fetch(qt),{country_code:o,region:r,continent_code:i}=await n.json();return{country:o,region:r,continent:i}},Wt=(e,t)=>{if(!e.get("Geo")){const o=Ce();e.set("Geo",encodeURIComponent(JSON.stringify(t)),{domain:o,path:"/",expires:365})}},jt=e=>{const t=Array.isArray(e)?e.map(r=>r&&r.toString().split(":")).filter(r=>r&&r.length>=2).reduce((r,i)=>(r[i[0]]=i[1],r),{}):{},n=r=>r!=null&&r.isActive?r.keyVal:r==null?void 0:r.defaultKeyVal,o=[];return{mark(r){const i=n(r);i&&!o.includes(i)&&o.push(i)},deprecatedMark:(r,i,s)=>{const c=s?i:100-i,u=`${r}_${s?"B":"A"}_${c}`,l=t[u]??u;o.includes(l)||o.push(l)},getLabradorKeyValues:()=>o}},$="non-",Y="XX";function Kt(e){return e.startsWith($)?{value:e.replace($,""),negated:!0}:{value:e,negated:!1}}function Qt(e,t){return t.some(n=>e.includes(n.value)&&n.negated)}const Yt=e=>{const t=e==null?void 0:e.toLowerCase();return n=>{const r=(n.d??n.devices??[]).map(i=>Kt(i.toLowerCase()));return r.length===0||!t?!0:Qt(t,r)?!1:r.some(i=>i.value===t!==i.negated)}};function Jt(e,t,n,o){return e.includes(`${$}${t}`)||e.includes(`${$}${t}-${n}`)||e.includes(`${$}${Y}-${o}`)}function Xt(e,t,n,o){return e.includes(Y)||e.includes(`${Y}-${o}`)||e.includes(t)||e.includes(`${t}-${n}`)}const Zt=e=>{const t=e.country,n=e.region,o=e.continent;return r=>{const i=r.r??r.regions??[];return i.length===0||Jt(i,t,n,o)?!1:Xt(i,t,n,o)}},en=e=>{try{const t=e.localStorage!==void 0&&e.localStorage!==null;return t&&(e.localStorage.setItem("__test__","test"),e.localStorage.removeItem("__test__")),t}catch{return!1}},tn=(e,t,n)=>{const o=en(n),r={getItem:a=>o?n.localStorage.getItem(a):null,setItem:(a,u)=>{if(o)return n.localStorage.setItem(a,u)}},i=a=>a?a<Date.now():!0,s=a=>({data:a,ttl:Date.now()+t}),c=a=>i(a.ttl)?null:a.data;return{set:a=>{const u=s(a);r.setItem(e,JSON.stringify(u))},get:()=>{const a=r.getItem(e);return a?c(JSON.parse(a)):null}}};function nn(e){return{source:e.s,rules:{defaultKeyValue:e.r.k,ranges:e.r.r.map(t=>({start:t.s,end:t.e,keyValue:t.k}))}}}function on(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="object"}function xe(e){const t=e.sampling??e.s;return typeof t=="number"&&t>0&&t<100?t:null}function Me(e){return(e==null?void 0:e.bucketing)??((e==null?void 0:e.bu)!==void 0?nn(e.bu):void 0)}const me=(e,t,n,o,r,i)=>{const s=e[n];if(on(s)){const c=s.find(a=>{const u=t.reduce((M,R)=>M&&R(a),!0),l=Me(a);if(l&&i&&u){const R=i(l.source)(a);if(R)return r==null||r.mark(R),R.isActive}const E=xe(a);if(E===null||!u||!o)return u;const x=o(a);return r&&r.deprecatedMark(n,E,x),x});return(c==null?void 0:c.v)??(c==null?void 0:c.value)}return s},rn=async(e,t)=>{const n=e.instantConfig;if(n)return n;const o=`https://services.fandom.com/icbm/api/config?app=${t}&compact=true`,r=`https://script.wikia.nocookie.net/fandom-ae-assets/icbm/prod/icbm_state_${t}.json`,i=tn(`instant-config-${t}`,6e4,e),s=await sn(o,i)??await Be(r)??{};return e.instantConfig=s,s},sn=async(e,t)=>{const n=t.get();if(n)return JSON.parse(n);const o=await Be(e);return o&&t.set(JSON.stringify(o)),o},Be=async e=>{try{const t=await Ne(e,2e3);return t.ok?t.json():void 0}catch{return}},an=e=>t=>{const n=xe(t);if(n===null)return!0;const o=Math.round(e()),r=Math.round(n);return o<r},$e=e=>{var n;const t=Number(((n=e.fandomContext)==null?void 0:n.experimentBucket)??y.get("eb")??Math.floor(Math.random()*100));return e.fandomContext=e.fandomContext||{},e.fandomContext.experimentBucket=t,()=>t},cn=()=>Number(w()),fe=e=>t=>{var i;const n=Me(t);if(!((i=n==null?void 0:n.rules)!=null&&i.ranges))return;const o=Math.round(e()),r=n.rules.ranges.find(s=>o>=s.start&&o<=s.end);return{isActive:!!r,defaultKeyVal:n.rules.defaultKeyValue,keyVal:r==null?void 0:r.keyValue}};function dn(e){return t=>{switch(t){case"eb":return fe($e(e));case"exp_bucket":return fe(cn);default:throw new Error(`Unknown bucketing source: ${t}`)}}}const un=({device:e,geo:t})=>[Yt(e),Zt(t)];function ln(e){if(e==="true"||e==="false")return e==="true";const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch{return e}}function gn(e,t){return[...t.keys()].filter(n=>n.startsWith("icbm__")&&t.get(n)!==null).map(n=>{const[,o]=n.split("__");return{key:o,value:ln(t.get(n))}}).reduce((n,{key:o,value:r})=>({...n,[o]:r}),e)}const mn=async(e,t)=>{const n=await rn(t,e);return gn(n,new URLSearchParams(t.location.search))},fn=(e,t,n)=>{const o=an($e(n)),r=jt(me(e,t,"icLABradorGamKeyValues")),i=dn(n);return{config:Object.keys(e).reduce((c,a)=>(c[a]=me(e,t,a,o,r,i),c),{}),activeLabradorKeyValues:r.getLabradorKeyValues()}},_n={icPrebidIntentIQTimeout:500,icPrebidIntentIQVersion:"6.06-20240711",icPreferredCMP:"onetrust",icAdEngineWaitBeforeFirstAdsRequestMS:0,icAdEngineAuctionTimeoutMS:1500,icAdEngineOnCreateBiddersRequestsTimeoutMS:1510,icAdEngineBidderInitTimeoutMS:1005,icPrebidConfigUpdateTimeoutMS:1e3,icPrebidConsentManagementTimeoutMS:1500,icPrebidInitTimeoutMS:500},pn=async(e,t,n)=>{const o=await mn(e,n);return fn(o,t,n)};async function wn(e,t,n){const o=un({device:t,geo:n}),{config:r,activeLabradorKeyValues:i}=await pn(e,o,window);return{config:{..._n,...r},activeLabradorKeyValues:i}}const En=()=>!0,J=(e,t,n={})=>{var s;const o=(s=V().registry)[e]??(s[e]=[]),r={sampling:n.sampling??En,requiresConsent:n.requiresConsent??!0},i=Object.assign(t,r);o.includes(i)||o.push(i)};function hn(){var e,t,n;return((e=window.fandomCmp)==null?void 0:e.ready)===!0&&((t=window.fandomCmp)==null?void 0:t.allowed.ads)===!0&&((n=window.fandomCmp)==null?void 0:n.optOut)===!1}function se(e,t){return hn()?e():t}const vn=4e3,Ue="opted-out",Tn=-1;function v(){return se(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.sessionId)??"unknown"},Ue)}function k(){return se(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.beaconId)??"unknown"},Ue)}function A(){return se(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.userId)??0},Tn)}function I(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumber)??-1}function C(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumberGlobal)??-1}function _(){var e,t;return window.pvUID??((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvUID)??"unknown"}function Ve(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.ppid)??"unknown"}function T(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteId)??-1}function b(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteName)??"unknown"}function h(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.lang)??"unknown"}function N(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.articleId)??-1}function Sn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.monetizationTier)??-2}function p(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.skin)??ke.UNKNOWN}function Fe(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.pageType)??"unknown"}function ae(){var e;return((e=window.RLCONF)==null?void 0:e.wgNamespaceNumber)??-1}function bn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.env)??"unknown"}function kn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.brand)??be.UNKNOWN}function An(){return`${kn()}-${p()}`}function In(){return typeof performance<"u"&&typeof performance.now=="function"?Math.round(performance.now()):-1}function ce(){return`${Ut()} ${De()}`}const Cn="1.0.0";function ze(){return Cn}function Nn(){return{pv_unique_id:_(),exp_bucket:w(),exp_bucket_v:_t(),exp_bucket_2:pt(),n:ae(),c:T(),a:N(),r:document.referrer,lc:h(),env:bn(),tsto:In(),tlv:ze(),src:An()}}const Rn=({payload:e},t)=>{t("pageload",e)},On=({event:e,payload:t},n)=>{const o={s:yn(),...t,u:A(),beacon:k(),session_id:v(),pv_unique_id:_(),tlv:ze()};n(e,o)};function yn(){return`ucp_${F()==="smartphone"?"mobile":"desktop"}`}const Pn=()=>{var e;return/[?&]ftl_debug=1($|&)/.test(((e=window==null?void 0:window.location)==null?void 0:e.search)??"")},Dn=(e,...t)=>{Pn()&&console.debug(`[FTL DEBUG]: ${e}`,...t)};function Ln(e){return((e*100>>>0)/4294967296*100|0)+1}function xn(e){let t=2654435769;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t^=t>>>16,t=Math.imul(t,2246822507)>>>0,t^=t>>>13,t=Math.imul(t,3266489909)>>>0,t^=t>>>16,Ln(t)}const W={},Mn="v1",de=(e,t,n)=>{if(e<1||e>100)throw new Error("Sampling rate must be between 1 and 100");if(!t)return!1;n&&(t=n+":"+t),t=Mn+":"+t;const o=W[t]??xn(t);return W[t]=o,Dn("identifierBasedDeterministicSampler cache:",W),e>=o},Bn=e=>{if(e<1||e>100)throw new Error("Sampling rate must be between 1 and 100");return e/100>=Math.random()};var B=(e=>(e.REQUEST="request",e.BEACON="beacon",e.SESSION="session",e.PAGEVIEW="pageview",e))(B||{});const $n=(e,t,n)=>o=>{if(!o)return!1;const r=e.find(s=>t(s,o)),i=n==null?void 0:n(o);if(!r)return!0;switch(r.binding){case B.SESSION:return Vn(r.rate,i);case B.BEACON:return Un(r.rate,i);case B.PAGEVIEW:return Fn(r.rate,i);case B.REQUEST:return Bn(r.rate);default:return ct(r.binding),!0}},Un=(e,t)=>{var n,o;return de(e,(o=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:o.beaconId,t)},Vn=(e,t)=>{var n,o;return de(e,(o=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:o.sessionId,t)},Fn=(e,t)=>{var n,o;return de(e,((o=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:o.pvUID)??(window==null?void 0:window.pvUID),t)},zn=[],Gn=(e,t)=>e.category===t.payload.category&&e.component===t.payload.component&&(e.action==="*"||e.action===t.payload.action),Hn=e=>e.payload.category,qn=$n(zn,Gn,Hn),Wn=()=>{J(te.PAGE_LOAD,Rn,{requiresConsent:!1}),J(he.SHORT_LIVED_TRACKING_EVENT,On,{sampling:qn})};function jn(){return"https://beacon.wikia-services.com/__track/special/"}const Ge=(e,t,n)=>{const o=new URL(e);Object.entries(t).forEach(([r,i])=>{o.searchParams.set(r,String(i))}),Ne(o.toString(),vn,{mode:"no-cors",keepalive:!0}).catch(r=>P({message:(n==null?void 0:n.errorMessage)??"Failed to send tracking request",priority:d.P4,error:r,code:At}))},Kn=(e,t)=>{const n=`${jn()}${e}`;Ge(n,t,{errorMessage:"Failed to send request to Beacon service"})},Qn=e=>{let t;return()=>(t!==void 0||(t=Math.random()*100<e),t)};function Yn(){Wn(),re(te.PAGE_LOAD,Nn())}function Jn(){return"v173"}function Xn(e){return e.type==="error"}function Zn(e){return e.type==="degradation"}function eo(e,t){return e<=t}function to(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.opts)==null?void 0:n.noAdsReasons)??[]}function no(e){return e.type===void 0&&(console.warn("Invalid usage of issue, the issue type is missing",e),e.type="error"),{type:e.type,timestamp:new Date,performanceMark:e.performanceMark??performance.mark(e.message),error:void 0,inPageStatus:!1,...e,data:e.data}}const oo=new Map([[d.P1,"fatal"],[d.P2,"error"],[d.P3,"warning"],[d.P4,"log"]]);function ro(){return new Promise(e=>{window.fandomSentry?e(window.fandomSentry):window.addEventListener("fandomSentryLoaded",()=>{e(window.fandomSentry)})})}async function io(e){(await ro()).withScope(n=>{var o;n.setTag("Environment",D()),n.setTag("priority",e.priority),n.setTag("adengpagestatus",e.inPageStatus?"true":"false"),n.setTag("configVersion",((o=window.fandomAdsSlotsConfig)==null?void 0:o.version)??"unknown"),n.setLevel(so(e.priority)),n.setTransactionName(ao(e)),n.captureException(e.error)})}function so(e){return oo.get(e)??"error"}function ao(e){let t="no error";return e.error instanceof Error&&(t=`${e.error.name} - ${e.message}`),`[${e.priority} ${e.type}] ${e.message} (${t})`}const j={error:{p1:1,p2:.5,p3:0,p4:0},degradation:{p1:1,p2:.1,p3:0,p4:0}};class co{constructor(t={}){f(this,"sentrySampleSettings");f(this,"queryOverride");this.sentrySampleSettings=this.mergeSampleSettings(t.sentrySampleOverrides),this.queryOverride=ne("force_sentry_send")}mergeSampleSettings(t){try{const n=D(),{error:o={},degradation:r={}}=(t==null?void 0:t[n])??{};return{error:{...j.error,...o},degradation:{...j.degradation,...r}}}catch(n){return P({code:ht,priority:d.P3,message:"Error merging sample settings in SentryManager",error:n}),j}}shouldSendToSentry(t){if(this.queryOverride)return!0;if(t.inPageStatus===!1)return!1;const n=this.sentrySampleSettings[t.type][t.priority];return Math.random()<n}handleIssue(t){this.shouldSendToSentry(t)&&io(t)}}const H=class H{constructor(t){f(this,"errorLog",[]);f(this,"degradationLog",[]);f(this,"cleanups",[]);f(this,"logPrefix","[Odyssey]");f(this,"eventSent",!1);f(this,"minLoggingLevel");f(this,"sentryManager");var n;this.minLoggingLevel=t.minLoggingLevel??d.P2;try{this.sentryManager=new co({sentrySampleOverrides:(n=window.icbm)==null?void 0:n.config.icSentrySampleOverrides}),this.sendOnSchedule(),this.sendOnPageHidden()}catch(o){console.error(`${this.logPrefix} IssueManager had a failure while initializing:`,o)}}sendOnSchedule(){if(this.eventSent)return;const t=setTimeout(()=>{this.eventSent||this.triggerPageStatus({trigger:"timeout"})},H.PAGE_STATUS_TIMEOUT_MS);this.cleanups.push(()=>clearTimeout(t))}sendOnPageHidden(){if(this.eventSent)return;const t=()=>{this.eventSent||document.visibilityState==="hidden"&&this.triggerPageStatus({trigger:"page_hidden"})};document.addEventListener("visibilitychange",t),this.cleanups.push(()=>document.removeEventListener("visibilitychange",t))}triggerPageStatus(t){this.eventSent||(this.eventSent=!0,this.cleanups.forEach(n=>n()),this.sendPageStatus(t))}handleIssue(t){var o;const n=no(t);this.printIssue(t),Zn(n)?this.handleDegradation(n):Xn(n)&&this.handleError(n),n.inPageStatus=!this.eventSent,(o=this.sentryManager)==null||o.handleIssue(n)}handleDegradation(t){this.degradationLog.push(t)}handleError(t){this.errorLog.push(t)}printIssue(t){eo(t.priority,this.minLoggingLevel)&&console.warn(`${this.logPrefix} [${t.priority}]: ${t.message}`,t.error,t.data)}errorCount(t){return this.errorLog.filter(n=>n.priority===t).length}degradationCount(t){return this.degradationLog.filter(n=>n.priority===t).length}getCombinedAndSortedIssueCodes(){return[...this.errorLog,...this.degradationLog].map(t=>t.code).sort()}sendPageStatus(t){const n=t.trigger!=="no_ads",o={event:Z.ADENGPAGESTATUS,payload:{deploymentEnvironment:D(),eventTrigger:t.trigger,errors:{p1:this.errorCount(d.P1),p2:this.errorCount(d.P2),p3:this.errorCount(d.P3),p4:this.errorCount(d.P4)},degradations:{p1:this.degradationCount(d.P1),p2:this.degradationCount(d.P2),p3:this.degradationCount(d.P3),p4:this.degradationCount(d.P4)},monetizationStatus:n?"ads":"no_ads",monetizationReasons:n?[]:to(),monetizationTier:wt(),issueCodes:this.getCombinedAndSortedIssueCodes(),statusChecks:{firstAuctionTimedOut:!1,helixTargetingIncluded:!0}}};return re(o.event,o.payload),o}reset(){for(const t of this.cleanups)t();this.cleanups.length=0,this.errorLog.length=0,this.degradationLog.length=0,this.eventSent=!1;try{this.sendOnSchedule(),this.sendOnPageHidden()}catch(t){this.handleError({message:"IssueManager: error during reset re-initialization",priority:d.P3,error:t,type:"error",code:St})}}};f(H,"PAGE_STATUS_TIMEOUT_MS",3e4);let X=H;class uo{constructor(){f(this,"adBlockDataPromise",Promise.withResolvers());this.runInitChecks(),this.registerBlockthroughListener()}adBlockSuspected(t){this.updateWindow(t.suspected,[t.reason])}async runInitChecks(){let t=[];try{t=await Pt([this.checkForScriptBlock("gumgum","https://g2.gumgum.com/hbid/imp?displaymanager=Prebid.js")],5e3)}catch{t=[{status:"fulfilled",value:{suspected:!0,reason:"initCheckTimeout"}}]}let n=!1;const o=[];for(const r of t)r.status==="fulfilled"?r.value.suspected&&(n=!0,o.push(r.value.reason)):ie({code:Ct,message:"Error running an AdBlockManager check",priority:d.P3});this.updateWindow(n,o)}updateWindow(t,n){window.fandomHost=window.fandomHost??{adBlockSuspected:void 0,adBlockReasons:[]},window.fandomHost.adBlockSuspected!=!0&&(window.fandomHost.adBlockSuspected=t),window.fandomHost.adBlockReasons=window.fandomHost.adBlockReasons?[...new Set(window.fandomHost.adBlockReasons.concat(n))].sort():[...n].sort(),this.adBlockDataPromise.resolve(()=>({adBlockSuspected:window.fandomHost.adBlockSuspected,adBlockReasons:window.fandomHost.adBlockReasons}))}async checkForScriptBlock(t,n){let o;try{await fetch(n,{method:"HEAD"}),o=!1}catch{o=!0}return{suspected:o,reason:`adTechFetch:${t}`}}getAdBlockData(){return this.adBlockDataPromise.promise}registerBlockthroughListener(){window.addEventListener("AcceptableAdsInit",t=>{const n=t.detail;typeof n=="boolean"&&this.updateWindow(n,["bt"])})}}const lo=()=>{try{return window.self!==window.top}catch{return!0}},go=["fandom.com","fandom-dev.pl","fandom-dev.us"],mo=async()=>{const e=go.some(t=>window.location.hostname.includes(t));return lo()||!e},fo=()=>Promise.all([Lt(),Dt()]);class _o{constructor(){f(this,"cmd",[]);f(this,"onReady",fo());const t=V();this.cmd=t.cmd,Ae(this),dt(t.q,this.executeTracking.bind(this))}executeTracking(t){var o,r;const n=(r=(o=window.fandomTrack)==null?void 0:o.registry)==null?void 0:r[t.event];if(!n||n.length===0){ie({code:It,message:"Unhandled tracking event",priority:d.P4,data:t});return}n.forEach(i=>this.trackEvent(i,t))}trackEvent(t,n){const o=()=>{t.sampling(n)&&t(n,Kn)};if(!t.requiresConsent)return o();this.onReady.then(o)}registerTracker(t,n,o){J(t,n,o)}}function po(){return(["fandom.com"].find(n=>window.location.hostname.includes(n))?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)??["us"])[0]+"/").replace(/\/+$/,"")}const K=new Map;function wo(e){var r,i;if(ne("force_tracking"))return!0;const t=K.get(e);if(t!==void 0)return t;const n=(i=(r=window.icbm)==null?void 0:r.config)==null?void 0:i.odysseyPrometheusSenderTrafficLimiter;if((n==null?void 0:n[e])===void 0)return K.set(e,!0),!0;const o=Math.random()*100<n[e];return K.set(e,o),o}function ue(e,t){var r,i;if(!wo(e))return;const n=[po(),"adeng","api","adengine","meter",e].join("/"),o=(((i=(r=window==null?void 0:window.ads)==null?void 0:r.context)==null?void 0:i.platform)||"fandom")+"_odyssey";Ge(`${n}?app=${o}`,t,{errorMessage:"Failed to send adengine metrics"})}function Eo({payload:e},t){const n=e.slotName?`_${e.slotName}`:"",o=t??e.type;ue("time",{action:`${o}${n}`,duration:Math.round(e.time)})}const ho=/\./g;function He(e){return e.replace(ho,"_")}function vo({event:e,payload:t,alias:n}){const o=n??e,r=t.slotName?`_${t.slotName}`:"",i={action:`${o}${r}`,duration:Math.round(t.time)};ue("time",i),qe(i)}function To(e){const n={action:He(e.name),duration:Math.round(e.duration)};ue("time",n),qe(n)}function qe(e){re(U,{type:g.PERFORMANCE_MARK,eventName:e.action,time:e.duration})}const So={[m.AE_FIRST_LINE_EXEC]:{},[m.AE_AFTER_INIT_PLUGINS]:{},[m.AE_AFTER_GPT_WRAPPER_INIT]:{},[m.AE_AD_ENGINE_INIT]:{},[m.AE_ON_BIDDERS_INIT]:{},[m.AE_AUCTION_START]:{onlyFirstRender:!0,duration:{start:m.AE_FIRST_LINE_EXEC,name:z.AE_DURATION_TO_BID}},[m.AE_CONFIG_CALLBACK_COMPLETE]:{duration:{start:m.AE_CONFIG_CALLBACK_STARTED,name:z.AE_CONFIG_CALLBACK_DURATION}},[m.AE_AUCTION_END]:{onlyFirstRender:!0,duration:{start:m.AE_AUCTION_START,name:z.AE_AUCTION_DURATION}},[m.AE_BEFORE_FIRST_CALL_ADS_REQUEST]:{},[m.AE_GPT_SLOT_REQUESTED_INITIAL]:{slotName:"top_leaderboard"},[m.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL]:{slotName:"top_leaderboard"},[m.AE_GPT_SLOT_RENDERED_ENDED_INITIAL]:{slotName:"top_leaderboard"},[m.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL]:{slotName:"top_leaderboard"}};class bo{constructor(){f(this,"eligiblePerformanceMarks",So);f(this,"eligibleEvents",[g.AE_INIT,g.SLOT_REQUESTED,g.SLOT_RENDERED,g.CREATIVE_RENDERED]);f(this,"performanceObserver");this.performanceObserver=this.createPerformanceObserver(),this.startPerformanceObserver(this.performanceObserver),this.registerTrackers()}createPerformanceObserver(){return new window.PerformanceObserver((t,n)=>{this.trackPerformanceMarks(t),this.disconnectPerformanceObserver(n)})}startPerformanceObserver(t){t.observe({type:"mark",buffered:!0})}disconnectPerformanceObserver(t){setTimeout(()=>{t.disconnect()},6e4)}registerTrackers(){V().cmd.push(t=>{t.registerTracker(g.CREATIVE_RENDERED,({payload:n})=>this.trackEvent({event:U,payload:{...n,type:g.CREATIVE_RENDERED}})),t.registerTracker(U,this.trackEvent.bind(this))})}trackEvent(t){this.eligibleEvents.includes(t.payload.type)&&(this.performanceMarkEvent(t),Eo(t,this.getAlias(t.payload.type)))}performanceMarkEvent({payload:t}){switch(t.type){case g.AE_INIT:performance.mark(`odyssey_${t.type}`);break;case g.SLOT_REQUESTED:case g.SLOT_RENDERED:performance.mark(`odyssey_${t.slotName}_${t.type}`);break}}getAlias(t){return{[g.AE_INIT]:void 0,[g.SLOT_REQUESTED]:"request",[g.SLOT_RENDERED]:"render",[g.VENDOR_TIME_UPDATE]:void 0,[g.CREATIVE_RENDERED]:void 0,[g.PERFORMANCE_MARK]:void 0}[t]}trackPerformanceMarks(t){t.getEntriesByType("mark").forEach(o=>{if(o){const r=this.transformEligiblePerformanceMark(o);r&&(vo(r),this.trackDurations(o))}})}trackDurations(t){try{const n=this.eligiblePerformanceMarks[t.name];if(n&&n.duration){const o=this.findMatchingStartMark(n.duration.start,t);if(!o){P({code:vt,message:`Could not measure performance duration: no matching start mark found for ${t.name}`,priority:d.P3});return}const r=performance.measure(n.duration.name,{start:o.startTime,end:t.startTime});To(r)}}catch{P({code:Tt,message:"Could not measure performance duration",priority:d.P3})}}findMatchingStartMark(t,n){const o=performance.getEntriesByName(t,"mark");if(o.length)return n.name!=m.AE_AUCTION_END?o[o.length-1]:o.find(r=>{var i,s;return((i=r.detail)==null?void 0:i.auctionId)===((s=n.detail)==null?void 0:s.auctionId)})}transformEligiblePerformanceMark(t){var c;const n=this.eligiblePerformanceMarks[t.name];if(n===void 0||this.abortRefreshMark(n,t))return;const o=Math.round(t.startTime),r=He(t.name),i=n.slotName!==void 0,s=i?(c=t.detail)==null?void 0:c.slotId:void 0;if(!(i&&n.slotName!==s))return{event:t.name,payload:{time:o,...i&&{slotName:s}},alias:r}}abortRefreshMark(t,n){var r;if((t==null?void 0:t.onlyFirstRender)!=!0)return!1;const o=(r=n.detail)==null?void 0:r.renderCycleCount;return o?o>1:(ie({code:Nt,message:`${n.name} is missing a renderCycleCount`,priority:d.P4}),!0)}}const q=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null));function We(e){var t,n,o;return((t=window.fandomCmp)==null?void 0:t.ready)===!0&&((n=window.fandomCmp)==null?void 0:n.allowed.ads)===!0&&((o=window.fandomCmp)==null?void 0:o.consentApi)===e}function je(){var e;return We("tcf")?((e=window.fandomCmp)==null?void 0:e.optOut)===!1?O.YES:O.NO:O.NOT_APPLICABLE}function Ke(){var e;return We("usp")?((e=window.fandomCmp)==null?void 0:e.optOut)===!0?O.YES:O.NO:O.NOT_APPLICABLE}function Qe(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.targeting)==null?void 0:n.wikiVertical)??"unknown"}async function ko(e,t){var c,a,u,l,E;const n=new Date,o=window.fandomHost.geo,r=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(l=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&l.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:Ye(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:F(),country:o.country,region:o.region,lang:h(),slot_id:Ze(e,t),slot_size:"",kv_pos:e.slotName,kv_rv:et(e),kv_s0v:Qe(),kv_s1:`_${b()}`,kv_s2:Fe(),kv_skin:p(),ppid:Ve(),page_width:window.document.body.scrollWidth.toString(),viewport_height:Xe(window.innerHeight),rollout_tracking:Je(),opt_in:je(),is_uap:0,opt_out_sale:Ke(),session_id:v(),pv_number:I(),pv_number_global:C(),pv_unique_id:_(),beacon:k(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w(),browser:ce(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:r,ad_block_suspected:i,ad_block_reasons:s,deployment_environment:D()}}async function Ao(e,t){var c,a,u,l,E;const n=new Date,o=window.fandomHost.geo,r=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(l=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&l.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:Ye(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:F(),country:o.country,region:o.region,lang:h(),advertiser_id:Co(e),creative_id:No(e),product_lineitem_id:Ro(e),order_id:Oo(e),slot_id:Ze(e,t),slot_size:yo(e),kv_pos:e.slotName,kv_rv:et(e),kv_s0v:Qe(),kv_s1:`_${b()}`,kv_s2:Fe(),kv_skin:p(),ppid:Ve(),page_width:window.document.body.scrollWidth.toString(),viewport_height:Xe(window.innerHeight),rollout_tracking:Je(),opt_in:je(),is_uap:0,opt_out_sale:Ke(),session_id:v(),pv_number:I(),pv_number_global:C(),pv_unique_id:_(),beacon:k(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w(),browser:ce(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:r,ad_block_suspected:i,ad_block_reasons:s,deployment_environment:D()}}const Io=e=>async(t,n)=>{let o;at(t.payload)?o=await ko(t.payload,e):o=await Ao(t.payload,e),n(t.event,q(o))};function Ye(e){return e.toString().replace("_info","")}function Je(){return window.OneTrust!==void 0?"1T":"toi"}function Xe(e){return e??0}function Co(e){var t;return`${((t=e.slotInfo)==null?void 0:t.advertiserId)??""}`}function No(e){var t;return`${((t=e.slotInfo)==null?void 0:t.creativeId)??""}`}function Ro(e){var t;return`${((t=e.slotInfo)==null?void 0:t.lineItemId)??""}`}function Oo(e){var t;return`${((t=e.slotInfo)==null?void 0:t.orderId)??""}`}function Ze(e,t){const n=e.slotName??"unknown";return t.getUid(n)}function yo(e){var t,n;return(t=e.slotInfo)!=null&&t.selectedSize?e.slotInfo.selectedSize:(n=e.slotInfo)!=null&&n.configuredSizes?e.slotInfo.configuredSizes.join(","):""}function et(e){return e.rv??-1}const Po={[g.AE_INIT]:{type:"load_times",beaconEventName:"load_time_init"},[g.SLOT_REQUESTED]:{type:"load_times",beaconEventName:"requested"},[g.SLOT_RENDERED]:{type:"load_times",beaconEventName:"loaded"}},_e=async({event:e,payload:t},n)=>{var l,E,x,M,R;const o=new Date,r=window.fandomHost.geo,i=await((l=window.fandomHost)==null?void 0:l.proxyPageSuspected),s=Po[t.type],c=(E=window.fandomHost)==null?void 0:E.adBlockSuspected,a=(M=(x=window.fandomHost)==null?void 0:x.adBlockReasons)!=null&&M.length?window.fandomHost.adBlockReasons.join(";"):void 0,u={event_name:Do(t,s),browser_ts:o.getTime(),load_time:Math.round(t.time),tz_offset:o.getTimezoneOffset(),country:r.country,session_id:v(),pv_unique_id:_(),c:T(),s:p(),exp_bucket:w(),proxy_page_suspected:i,odyssey_version:((R=window.fandomAds)==null?void 0:R.version)??"unknown",ad_block_suspected:c,ad_block_reasons:a,deployment_environment:D()};n(e,q(u))};function Do(e,t){return`${e.slotName?`${e.slotName}_`:""}${(t==null?void 0:t.beaconEventName)??e.eventName??e.type}`}function Lo(e,t,n,o,r){var i;return{status:Mo(e),name:Bo(e),rv:Go(e),auction_id:e.bidInfo.auctionId??"",rejection_reason:e.bidInfo.rejectionReason??"",odyssey_version:((i=window.fandomAds)==null?void 0:i.version)??"unknown",response_time:Vo(e),size:$o(e),price:Uo(e),additional_flags:zo(e),slot_id:t.getUid(e.slotName),pos:e.baseSlotName,pv_number:I(),pv_number_global:C(),pv_unique_id:_(),c:T(),s:p(),exp_bucket:w(),proxy_page_suspected:n,ad_block_suspected:o,ad_block_reasons:r,full_auction:Ho(e),deployment_environment:D()}}const xo=e=>async({payload:t},n)=>{var c,a,u,l;const o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),r=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,i=(l=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&l.length?window.fandomHost.adBlockReasons.join(";"):void 0,s=Lo(t,e,o,r,i);n("adengbidders",q(s))};function Mo(e){var t,n,o;return(t=e.bidInfo)!=null&&t.status?e.bidInfo.status:((n=e.bidInfo)==null?void 0:n.timedOut)===!0?"timedout":((o=e.bidInfo)==null?void 0:o.timedOut)===!1?"on_time":"unknown"}function Bo(e){var t;return((t=e.bidInfo)==null?void 0:t.bidderName)??"unknown"}function $o(e){var t;return((t=e.bidInfo)==null?void 0:t.size)??"unknown"}function Uo(e){var t;return((t=e.bidInfo)==null?void 0:t.price)??"unknown"}function Vo(e){var t;return((t=e.bidInfo)==null?void 0:t.timeToRespond)??0}function Fo(e){var t,n,o;(t=e==null?void 0:e.bidInfo)!=null&&t.buyerId&&((o=e.flags)==null||o.push(`buyer_id=${(n=e.bidInfo)==null?void 0:n.buyerId}`))}function zo(e){return e.flags=[],Fo(e),(e.flags??[]).join(";")}function Go(e){return e.rv??-1}function Ho(e){var t;return((t=e.bidInfo)==null?void 0:t.fullAuction)===!0?"yes":"no"}const tt="error",qo=e=>({event:t,payload:n},o)=>{const r=window.fandomHost.geo,i=Q(n),s={slot_size:er(n),real_ad_size:Zo(i),requested_sizes:tr(n),slot_id:e.getUid(Q(n)),position:Q(n),country_code:r.country,region:r.region,rv:nr(n),...Wo(n),session_id:v(),pv_number:I(),pv_number_global:C(),pv_unique_id:_(),beacon:k(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};o(t,s)};function Wo(e){const t=e.slotInfo??{};return{advertiser_id:`${t.advertiserId??""}`,creative_id:`${t.creativeId??""}`,line_item_id:`${t.lineItemId??""}`,order_id:`${t.orderId??""}`}}function jo(e){return Ko(e)??Yo(e)}function Ko(e){const t=Qo(e);if(!t)return;const{offsetHeight:n,offsetWidth:o}=t;return n&&o?{height:n,width:o}:void 0}function Qo(e){var t,n,o;return(o=(n=(t=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] iframe`))==null?void 0:t.contentWindow)==null?void 0:n.document)==null?void 0:o.querySelector("html")}function Yo(e){var r;const t=(r=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] div`))==null?void 0:r.firstElementChild;if(!t)return;const{clientHeight:n,clientWidth:o}=t;return n&&o?{height:n,width:o}:void 0}function Jo(e){const t=document.getElementById(e);return{width:(t==null?void 0:t.offsetWidth)??0,height:(t==null?void 0:t.offsetHeight)??0}}function Xo(e){const t=document.querySelector(`#${e} iframe`);if(!t)return;const{clientHeight:n,clientWidth:o}=t;return n&&o?{height:n,width:o}:void 0}function Zo(e){const t=CSS.escape(e),{width:n,height:o}=Xo(t)??jo(t)??Jo(t);return!n||!o?"unknown":`${n}x${o}`}function er(e){var t,n;return((t=e.slotInfo)==null?void 0:t.selectedSize)===null?"unknown":(n=e.slotInfo)!=null&&n.selectedSize?e.slotInfo.selectedSize:tt}function tr(e){try{const t=e.slotInfo.parsedSizes.join(",");return t===""?"unknown":t}catch{return tt}}function Q(e){return e.slotName??"unknown"}function nr(e){return e.rv??-1}const or=async({payload:e},t)=>{var s;const n=new Date,o=await Le(y);if(rr(e)==="")return;const i={timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),prop_value:((s=e.flags)==null?void 0:s.join(";"))??"",country:o.country,session_id:v(),pv_number:I(),pv_number_global:C(),pv_unique_id:_(),beacon:k(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};t("adenglabradorinfo",i)};function rr(e){var t;return((t=e.flags)==null?void 0:t.join(";"))??""}const ir=({event:e=ee.TRACKING_EVENT,payload:t},n)=>{const o={...t,url:document.URL,session_id:v(),pv_number:I(),pv_number_global:C(),pv_unique_id:_(),beacon:k(),c:T(),x:b(),lc:h(),s:nt(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};n(e,o)};function nt(){return`ucp_${F()==="smartphone"?"mobile":"desktop"}`}const sr=({payload:e},t)=>{const n={partner_name:e.partnerName,partner_identity_id:e.partnerIdentityId,pv_unique_id:_(),session_id:v(),beacon:k(),ua:window.navigator.userAgent,s:nt()};t("identityinfo",n)},ar=({payload:e},t)=>{const n=new Date,o={tag_name:e.tagName,event_name:e.eventName,event_details:e.eventDetails,start_time:e.startTime,monetization_tier:Sn(),wiki_vars:e.wikiVars,env:e.env,software_version:e.softwareVersion,exp_data:e.expData,c:T(),n:ae(),a:N(),s:p(),beacon:k(),session_id:v(),pv_unique_id:_(),pv_number:I(),pv_number_global:C(),exp_bucket:w(),browser_ts:n.getTime(),tz_offset:n.getTimezoneOffset(),u:A(),x:b(),lc:h(),ua:window.navigator.userAgent};t("component_performance",o)},cr=async({payload:e},t)=>{var o;const n={...dr(e),...await ur(),...lr(),...gr(),...mr(),browser:ce(),odyssey_version:((o=window.fandomAds)==null?void 0:o.version)??"unknown"};t("adengpagestatus",q(n))};function dr(e){return{event_trigger:e.eventTrigger,deployment_environment:e.deploymentEnvironment,monetization_status:e.monetizationStatus,monetization_reasons:e.monetizationReasons.join(";"),monetization_tier:e.monetizationTier??void 0,p1_error_count:e.errors.p1,p2_error_count:e.errors.p2,p3_error_count:e.errors.p3,p4_error_count:e.errors.p4,p1_degradation_count:e.degradations.p1,p2_degradation_count:e.degradations.p2,p3_degradation_count:e.degradations.p3,p4_degradation_count:e.degradations.p4,status_first_auction_timed_out:e.statusChecks.firstAuctionTimedOut??void 0,status_helix_targeting_included:e.statusChecks.helixTargetingIncluded??void 0,issue_codes:e.issueCodes.join(";")}}async function ur(){var i,s,c;const[e,t]=await Promise.all([(i=window.fandomHost)==null?void 0:i.adBlockData,(s=window.fandomHost)==null?void 0:s.proxyPageSuspected]),n=e==null?void 0:e(),o=(c=n==null?void 0:n.adBlockReasons)==null?void 0:c.join(";"),r={ad_block_suspected:n==null?void 0:n.adBlockSuspected,proxy_page_suspected:t};return o&&(r.ad_block_reasons=o),r}function lr(){return{pv_number:I(),pv_number_global:C(),pv_unique_id:_()}}function gr(){return{c:T(),x:b(),lc:h(),s:p(),a:N()}}function mr(){return{session_id:v(),beacon:k(),ua:window.navigator.userAgent,u:A(),n:-1,exp_bucket:w()}}class fr{constructor(t={}){this.map=t}generateUidForSlot(t){this.map[t]=crypto.randomUUID()}getUid(t){return this.map[t]!==void 0?this.map[t]:(this.generateUidForSlot(t),this.getUid(t))}}function _r(e,t){const n=[];for(let o=0;o<e.length;o+=t)n.push(e.slice(o,o+t));return n}async function pr({payload:e},t){const n=new Date,o={"wiki-article":"wa",widget:"wg"},r=_r(e.recommendations,10),i={event_name:e.eventName,env:e.env,sft_v:e.softwareVersion,exp_d:e.expData,act:e.action,cat:e.category,cmp:e.component,trk_m:e.trackingMethod,b2:e.b2,c_id:e.contextContentId,c_t:e.contextContentType,c_sp:e.contextSpecialPage,w_id:e.widgetId,wl_id:e.widgetLocationId,w_cnt:e.widgetContent,w_lyt:e.widgetLayout,c:T(),n:ae(),a:N(),s:p(),beacon:k(),session_id:v(),pv_unique_id:_(),pv_number:I(),pv_number_global:C(),exp_bucket:w(),b_ts:n.getTime(),tz_o:n.getTimezoneOffset(),u:A(),x:b(),lc:h(),ua:window.navigator.userAgent};await Promise.all(r.map(s=>{const a=s.map(l=>`${l.id}|${o[l.type]??l.type}|${l.position??""}`).join(","),u={...i,recs:a};return t("recommendation",u)}))}const G=100;function wr(e){var n,o;if(e==="adengbidders"||ne("force_tracking"))return G;const t=(o=(n=window.icbm)==null?void 0:n.config)==null?void 0:o.odysseyBeaconSenderTrafficLimiter;return(t==null?void 0:t[e])===void 0?G:t[e]}const S=e=>{const t=wr(e);return t===G?{}:{sampling:Qn(t)}},Er=()=>{const e=new fr;V().cmd.push(t=>{t.registerTracker(it,Io(e),S("adengadinfo")),t.registerTracker(pe.BIDDER_RESPONSE,xo(e),S("adengbidders"));const n=S("adengloadtimes");t.registerTracker(g.CREATIVE_RENDERED,({payload:o},r)=>_e({event:U,payload:{...o,type:g.CREATIVE_RENDERED}},r),n),t.registerTracker(U,(o,r)=>_e(o,r),n),t.registerTracker(st,qo(e),S("adengadsizeinfo")),t.registerTracker(Ee.LABRADOR_KEYVALUES,or,S("adenglabradorinfo")),t.registerTracker(we.IDENTITY_INFO,sr,S("identityinfo")),t.registerTracker(ee.TRACKING_EVENT,ir,S("trackingevent")),t.registerTracker(ve.COMPONENT_PERFORMANCE_EVENT,ar,S("component_performance")),t.registerTracker(Te.RECOMMENDATION_EVENT,pr,S("recommendation")),t.registerTracker(Z.ADENGPAGESTATUS,cr,S("adengpagestatus"))})};(async()=>{const e=mt(),t=F(),n=await Le(y),o=De();window.icbm=await wn(e,t,n),window.dispatchEvent(new Event("instantConfigLoaded")),Wt(y,n);const r=new uo,i=new X({});window.fandomHost={...window.fandomHost??{},app:e,device:t,icbm:window.icbm,geo:n,version:Jn(),adBlockManager:r,adBlockData:r.getAdBlockData(),issueManager:i,browser:o,proxyPageSuspected:mo(),reset:()=>{i.reset()}},new bo,Er(),Yn(),new _o,Ae(window.fandomHost)})();
//# sourceMappingURL=main.js.map
